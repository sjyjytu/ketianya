(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{129:function(e,t,a){e.exports=a(292)},292:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(22),c=a.n(i),o=a(294),s=a(295),l=a(296),u=a(25),m=a(26),p=a(28),g=a(27),h=a(29),d=a(15),f=a(113),E=a.n(f),b=a(57),v=a.n(b),y=a(17),O=a.n(y),w=a(21),j=a.n(w),T=a(35),k=a.n(T),N=a(114),I=a.n(N),C=a(115),R=a.n(C),A=a(18);var S=Object(A.b)(function(e){return{userId:e.Login.userId}})(Object(d.withStyles)(function(e){return{root:{flexGrow:2*e.spacing.unit,marginLeft:-e.spacing.unit,marginRight:-e.spacing.unit},grow:{flexGrow:2*e.spacing.unit},button:{marginRight:5*e.spacing.unit},hidden:{display:"none"},buttonIcon:{marginRight:.5*e.spacing.unit}}})(function(e){var t=e.classes,a=e.userId;return r.a.createElement("div",{className:t.root},r.a.createElement(E.a,{position:"static"},r.a.createElement(v.a,null,r.a.createElement(O.a,{variant:"h6",color:"inherit",className:t.grow},"\u5ba2\u5929\u6daf"),r.a.createElement(j.a,{color:"inherit",className:t.button,href:"#"},r.a.createElement(I.a,{className:t.buttonIcon}),"Home"),""!==a?r.a.createElement(j.a,{color:"inherit",className:t.button,href:"#/write-article"},r.a.createElement(R.a,{className:t.buttonIcon}),"\u5199\u6587\u7ae0"):r.a.createElement(j.a,{color:"inherit",className:t.button,href:"#/login"},r.a.createElement(k.a,{className:t.buttonIcon}),"Sign in"),r.a.createElement(j.a,{color:"inherit",className:t.button,href:"#/signup"},r.a.createElement(k.a,{className:t.buttonIcon}),"Sign up"))))}));var x=Object(d.withStyles)(function(e){return{root:{marginLeft:-e.spacing.unit,marginRight:-e.spacing.unit,backgroundColor:e.palette.primary.light},title:{color:"#FFFFFF",paddingTop:12*e.spacing.unit,paddingBottom:8*e.spacing.unit,fontWeight:600},description:{paddingTop:3*e.spacing.unit,color:e.palette.primary.dark}}})(function(e){var t=e.classes;return r.a.createElement("div",{className:t.root},r.a.createElement(O.a,{className:t.title,variant:"h2",align:"center"},"\u5ba2\u5929\u6daf",r.a.createElement(O.a,{className:t.description,variant:"body2",align:"center"},"A place to share your adventure.")))}),L=a(116),D=a.n(L),P=a(117),B=a.n(P),F=a(119),W=a.n(F),_=a(118),G=a.n(_),z=a(120),M=a.n(z),q="SET_TAG",U="LOGIN",H={ALL:"\u6240\u6709",SHANG_HAI:"\u4e0a\u6d77",JIANG_SU:"\u6c5f\u82cf",DISNEY:"\u8fea\u58eb\u5c3c"};var J=function(e){return e.map(function(e){return{name:e.title}})};var Y=Object(A.b)(function(e){return{Tag:e.Tag}},function(e){return{onClick:function(t){return e(function(e){return{type:q,tag:e}}(t))}}})(Object(d.withStyles)(function(e){return{root:{marginLeft:-e.spacing.unit,marginRight:-e.spacing.unit},margin:{margin:e.spacing.unit},chooseTag:{backgroundColor:e.palette.primary.dark,margin:e.spacing.unit},expandPanel:{backgroundColor:e.palette.primary.elight},text:{fontSize:"18px",fontWeight:"500",color:"purple"}}})(function(e){var t=e.classes,a=e.tags,n=e.Tag,i=e.onClick;return r.a.createElement("div",{className:t.root},r.a.createElement(D.a,{className:t.expandPanel},r.a.createElement(B.a,{expandIcon:r.a.createElement(G.a,null)},r.a.createElement(O.a,{className:t.text},"Choose a tag")),r.a.createElement(W.a,null,a.map(function(e){return r.a.createElement(j.a,{size:"small",variant:"outlined","arial-label":"tag",className:n===e.name?t.chooseTag:t.margin,onClick:function(){return i(e.name)},key:e.name},r.a.createElement(M.a,null),e.name)}))))})),K=a(121),Q=a.n(K),V=a(293),X=a(123),Z=a.n(X),$=a(122),ee=a.n($),te=a(219),ae="http://meandemo-env.2ammmpcvep.ap-southeast-1.elasticbeanstalk.com";function ne(e){return e.body}var re=function(e){return te.get(ae+e).then(ne)},ie=function(e,t){return te.post(ae+e).send(t).then(ne)},ce={getArticles:function(){return re("/api/posts")},postAnArticle:function(e,t,a,n){return te.post(ae+"/api/posts").set("Authorization","Bearer "+n).attach("image",a,e).field("title",e).field("content",t).then(ne)},deleteArticle:function(e,t){return te.del(ae+"/api/posts/"+e).set("Authorization","Bearer "+t).then(ne)}},oe={login:function(e,t){return ie("/api/user/login",{email:e,password:t})},signup:function(e,t){return ie("/api/user/signup",{email:e,password:t})}};var se=Object(A.b)(function(e){return{Tag:e.Tag,Login:e.Login,Articles:e.Articles}},function(e){return{deleteButtonClick:function(t,a){return ce.deleteArticle(t,a).then(e({type:"DELETE",articleId:t})).catch(function(){return alert("delete article failed, please try again")})}}})(Object(d.withStyles)(function(e){return{root:{marginTop:5*e.spacing.unit,paddingLeft:"20%",paddingRight:"10%"},paper:{paddingLeft:"40%",marginTop:5*e.spacing.unit},date:{marginTop:2*e.spacing.unit},avatar:{marginRight:2*e.spacing.unit,marginLeft:-e.spacing.unit},title:{color:e.palette.primary.dark,fontSize:3*e.spacing.unit},summary:{color:"gray",fontSize:e.spacing.unit},link:{color:"purple"},divider:{marginTop:2*e.spacing.unit,marginBottom:5*e.spacing.unit},deleteButton:{marginLeft:"70%"},rightIcon:{marginLeft:e.spacing.unit}}})(function(e){var t=e.classes,a=e.Articles,n=e.Tag,i=e.Login,c=e.deleteButtonClick,o=a.articles.slice(0).reverse();return r.a.createElement("div",{className:t.root},o.map(function(e){return e.tag===n||"\u6240\u6709"===n?r.a.createElement(r.a.Fragment,{key:e._id},r.a.createElement(v.a,null,r.a.createElement(Q.a,{className:t.avatar,alt:"Person",children:e.author}),r.a.createElement(O.a,{variant:"h6"},e.creator)),r.a.createElement(O.a,{className:t.title},e.title),r.a.createElement(O.a,{className:t.summary},e.content.substring(0,20)+"..."),r.a.createElement(V.a,{to:"article/"+e._id,className:t.link},"Read more..."),i.userId===e.creator?r.a.createElement(j.a,{variant:"contained",color:"secondary",className:t.deleteButton,onClick:function(){return c(e._id,i.token)}},"Delete",r.a.createElement(ee.a,{className:t.rightIcon})):null,r.a.createElement(Z.a,{className:t.divider})):null}))})),le=function(e){function t(e){return Object(u.a)(this,t),Object(p.a)(this,Object(g.a)(t).call(this,e))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;ce.getArticles().then(function(t){return e.props.storeAllArticles(t.posts)}).catch(function(){return alert("storeArticles failed")})}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(S,null),r.a.createElement(x,null),r.a.createElement(Y,{tags:[{name:"\u4e0a\u6d77"},{name:"\u6c5f\u82cf"},{name:"\u8fea\u58eb\u5c3c"},{name:"\u6240\u6709"}]}),r.a.createElement(se,null))}}]),t}(r.a.Component);var ue=Object(A.b)(function(e){return{Articles:e.Articles}},function(e){return{storeAllArticles:function(t){e(function(e){return{type:"STORE_A",articles:e,tags:J(e)}}(t))}}})(Object(d.withStyles)(function(e){return{}})(le)),me=a(20),pe=a(23),ge=a.n(pe),he=a(31),de=a.n(he),fe=a(24),Ee=a.n(fe),be=a(32),ve=a.n(be),ye=a(36),Oe=Object(d.createMuiTheme)({palette:{primary:{elight:ye.blue[100],light:ye.blue[200],main:ye.blue[500],dark:ye.blue[800]},secondary:{main:ye.lime.A400,dark:ye.lightGreen.A700}},typography:{fontFamily:"Roboto"}}),we=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(g.a)(t).call(this,e))).state={username:"",password:""},a.handleInputChange=function(e){return function(t){var n=a.state,r=Object.assign({},n,Object(me.a)({},e,t.target.value));a.setState(r)}},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.redirectTo&&(this.props.history.push(e.redirectTo),this.props.onRedirect())}},{key:"render",value:function(){var e=this;return r.a.createElement(d.MuiThemeProvider,{theme:Oe},r.a.createElement(S,null),r.a.createElement("main",{className:this.props.classes.main},r.a.createElement(ge.a,{className:this.props.classes.paper},r.a.createElement(k.a,null),r.a.createElement(O.a,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.props.checkAccount(e.state.username,e.state.password)}},r.a.createElement(de.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(ve.a,{htmlFor:"username"},"UserName"),r.a.createElement(Ee.a,{id:"username",name:"username",value:this.state.username,onChange:this.handleInputChange("username"),autoFocus:!0})),r.a.createElement(de.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(ve.a,{htmlFor:"password"},"Password"),r.a.createElement(Ee.a,{id:"password",name:"password",value:this.state.password,autoComplete:"current-password",onChange:this.handleInputChange("password"),type:"password"})),r.a.createElement(j.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary"},"Sign in")))))}}]),t}(r.a.Component);var je=Object(A.b)(function(e){return{redirectTo:e.Redirect.redirectTo}},function(e){return{checkAccount:function(t,a){oe.login(t,a).then(function(t){return e({type:U,result:t})}).catch(function(e){return alert("username or password error")})},onRedirect:function(){return e({type:"REDIRECTED"})}}})(Object(d.withStyles)(function(e){return{main:Object(me.a)({width:"auto",display:"block",marginLeft:3*e.spacing.unit,marginRight:3*e.spacing.unit},e.breakpoints.up(400+3*e.spacing.unit*2),{width:400,marginLeft:"auto",marginRight:"auto"}),paper:{marginTop:8*e.spacing.unit,display:"flex",flexDirection:"column",alignItems:"center",padding:"".concat(2*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px")}}})(we)),Te=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(g.a)(t).call(this,e))).state={username:"",password:""},a.handleInputChange=function(e){return function(t){var n=a.state,r=Object.assign({},n,Object(me.a)({},e,t.target.value));a.setState(r)}},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.redirectTo&&(this.props.history.push(e.redirectTo),this.props.onRedirect())}},{key:"render",value:function(){var e=this;return r.a.createElement(d.MuiThemeProvider,{theme:Oe},r.a.createElement(S,null),r.a.createElement("main",{className:this.props.classes.main},r.a.createElement(ge.a,{className:this.props.classes.paper},r.a.createElement(k.a,null),r.a.createElement(O.a,{component:"h1",variant:"h5"},"Sign up"),r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.props.checkAccount(e.state.username,e.state.password)}},r.a.createElement(de.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(ve.a,{htmlFor:"username"},"UserName"),r.a.createElement(Ee.a,{id:"username",name:"username",value:this.state.username,onChange:this.handleInputChange("username"),autoFocus:!0})),r.a.createElement(de.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(ve.a,{htmlFor:"password"},"Password"),r.a.createElement(Ee.a,{id:"password",name:"password",value:this.state.password,autoComplete:"current-password",onChange:this.handleInputChange("password"),type:"password"})),r.a.createElement(j.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary"},"Sign up")))))}}]),t}(r.a.Component);var ke=Object(A.b)(function(e){return{redirectTo:e.Redirect.redirectTo}},function(e){return{checkAccount:function(t,a){oe.signup(t,a).then(function(t){return e({type:"SIGNUP",result:t})}).catch(function(){return alert("username has been used")})},onRedirect:function(){return e({type:"REDIRECTED"})}}})(Object(d.withStyles)(function(e){return{main:Object(me.a)({width:"auto",display:"block",marginLeft:3*e.spacing.unit,marginRight:3*e.spacing.unit},e.breakpoints.up(400+3*e.spacing.unit*2),{width:400,marginLeft:"auto",marginRight:"auto"}),paper:{marginTop:8*e.spacing.unit,display:"flex",flexDirection:"column",alignItems:"center",padding:"".concat(2*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px")}}})(Te)),Ne=a(74),Ie=a.n(Ne),Ce=a(73),Re=a.n(Ce),Ae=a(124),Se=a.n(Ae),xe=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(g.a)(t).call(this,e))).state={title:"",content:"",image:""},a.handleInputChange=function(e){return function(t){var n=a.state,r=Object.assign({},n,Object(me.a)({},e,t.target.value));a.setState(r)}},a.handleImageChange=function(e){a.setState({image:e.target.files[0]})},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.redirectTo&&(this.props.history.push(e.redirectTo),this.props.onRedirect())}},{key:"render",value:function(){var e=this;return r.a.createElement(d.MuiThemeProvider,{theme:Oe},r.a.createElement(S,null),r.a.createElement("main",{className:this.props.classes.main},r.a.createElement(ge.a,{className:this.props.classes.paper},r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.props.post(e.state.title,e.state.content,e.state.image,e.props.authToken)}},r.a.createElement(de.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(ve.a,{htmlFor:"title"},"Title"),r.a.createElement(Ee.a,{id:"title",name:"title",value:this.state.title,onChange:this.handleInputChange("title"),autoFocus:!0})),r.a.createElement(Ie.a,{margin:"normal",fullWidth:!0,multiline:!0,label:"summary",rows:5,variant:"outlined",id:"summary",placeholder:"\u4f60\u5c3d\u7ba1\u5199\uff0c\u53cd\u6b63\u6211\u4e0d\u5b58\u4e0b\u6765..."}),r.a.createElement(Ie.a,{margin:"normal",required:!0,fullWidth:!0,multiline:!0,label:"content",rows:20,variant:"outlined",id:"content",placeholder:"write your article here...",value:this.state.content,onChange:this.handleInputChange("content")}),r.a.createElement("input",{accept:".jpg,.jpeg,.png ",className:this.props.classes.input,id:"icon-button-file",type:"file",ref:function(t){return e.image=t},onChange:this.handleImageChange}),r.a.createElement(Re.a,{color:"primary",className:this.props.classes.iconButton,component:"span",onClick:function(){return e.image.click()}},r.a.createElement(Se.a,null)),r.a.createElement(j.a,{type:"submit",variant:"contained",size:"medium",color:"primary",className:this.props.classes.submitButton},"Submit")))))}}]),t}(r.a.Component);var Le=Object(A.b)(function(e){return{redirectTo:e.Redirect.redirectTo,authToken:e.Login.token}},function(e){return{post:function(t,a,n,r){ce.postAnArticle(t,a,n,r).then(function(t){return e({type:"POST"})}).catch(function(){return alert("post article failed")})},onRedirect:function(){return e({type:"REDIRECTED"})}}})(Object(d.withStyles)(function(e){return{main:Object(me.a)({width:"auto",display:"block",marginLeft:3*e.spacing.unit,marginRight:3*e.spacing.unit},e.breakpoints.up(800+3*e.spacing.unit*2),{width:800,marginLeft:"auto",marginRight:"auto"}),paper:{marginTop:8*e.spacing.unit,display:"flex",flexDirection:"column",alignItems:"center",padding:"".concat(2*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px")},submitButton:{float:"right"},iconButton:{float:"left"},input:{display:"none"}}})(xe)),De=a(127);var Pe=function(e){function t(e){return Object(u.a)(this,t),Object(p.a)(this,Object(g.a)(t).call(this,e))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props.match.params.id,t=this.props.articles.filter(function(t){return t._id===e}),a=Object(De.a)(t,1)[0];return console.log(a),r.a.createElement(d.MuiThemeProvider,{theme:Oe},r.a.createElement(S,null),r.a.createElement("main",{className:this.props.classes.main},r.a.createElement(ge.a,{className:this.props.classes.paper,evaluation:3},r.a.createElement(O.a,{variant:"h3",className:this.props.classes.title,color:"primary"},a.title),r.a.createElement(O.a,{variant:"h6",className:this.props.classes.author,color:"secondary"},"\u4f5c\u8005id\uff1a"+a.creator),r.a.createElement("img",{src:a.imagePath,alt:a.title,className:this.props.classes.image}),r.a.createElement(O.a,{variant:"body1",className:this.props.classes.content,color:"inherit"},a.content))))}}]),t}(r.a.Component),Be=Object(A.b)(function(e){return{articles:e.Articles.articles}})(Object(d.withStyles)(function(e){return{main:Object(me.a)({width:"auto",display:"block",marginLeft:3*e.spacing.unit,marginRight:3*e.spacing.unit},e.breakpoints.up(800+3*e.spacing.unit*2),{width:800,marginLeft:"auto",marginRight:"auto"}),paper:{marginTop:8*e.spacing.unit,display:"flex",flexDirection:"column",alignItems:"center",padding:"".concat(2*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px")},title:{marginBottom:4*e.spacing.unit},content:{marginBottom:2*e.spacing.unit},image:{width:"70%",marginBottom:2*e.spacing.unit},author:{marginBottom:2*e.spacing.unit}}})(Pe)),Fe=function(){return r.a.createElement(o.a,null,r.a.createElement(s.a,null,r.a.createElement(l.a,{exact:!0,path:"/",component:ue}),r.a.createElement(l.a,{exact:!0,path:"/login",component:je}),r.a.createElement(l.a,{exact:!0,path:"/signup",component:ke}),r.a.createElement(l.a,{exact:!0,path:"/write-article",component:Le}),r.a.createElement(l.a,{exact:!0,path:"/article/:id",component:Be})))},We=a(55),_e=a(126);var Ge=Object(_e.a)({Tag:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H.ALL,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case q:return t.tag;default:return e}},Login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{userId:"",token:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case U:return{userId:t.result.userId,token:t.result.token};default:return e}},Redirect:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{redirectTo:null};switch((arguments.length>1?arguments[1]:void 0).type){case"REDIRECTED":return{redirectTo:null};case U:case"SIGNUP":case"POST":case"DELETE":return{redirectTo:"/"};default:return e}},Articles:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{articles:[],tags:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"STORE_A":return{articles:t.articles,tags:t.tag};case"DELETE":for(var a=Object.assign({},e),n=0;n<a.articles.length;n++)if(a.articles[n]._id===t.articleId){a.articles.splice(n,1);break}return a;default:return e}}}),ze=Object(We.b)(Ge);c.a.render(r.a.createElement(A.a,{store:ze},r.a.createElement(d.MuiThemeProvider,{theme:Oe},r.a.createElement(Fe,null))),document.getElementById("root"))}},[[129,1,2]]]);
//# sourceMappingURL=main.b1661843.chunk.js.map